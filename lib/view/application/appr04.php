<div class="card border-danger">
    <div class="card-body">
        <div class="row">
            <div class="col-6">
                <h5>4th Chekup (ACL)</h5>
            </div>
            <siv class="col-6">
                <input class="form-control mx-1 my-1" type="search" name="searchData" id="search_circular" placeholder="Search User">
            </siv>
        </div>
        <hr>
        <div id="edit">
            <form  enctype="multipart/form-data">
                <h4>Personal Details</h4>
                <div class="form-group px-5">
                <input class="form-control mx-1 my-1" type="hidden" value="" id="ID" name="Id">
                </div>
                <div class="form-group px-5 ">
                <label class="form-label mt-2 ">Full Name of Member</label>
                <input type="text" class="form-control" id="Name" name="Name" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">full Address</label>
                <input type="text" class="form-control " id="Address" name="Address" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Father's Full Name </label>
                <input type="text" class="form-control" id="FatherName" name="FatherName" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Mother's Full Name</label>
                <input type="text" class="form-control" id="MotherName" name="MotherName" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Spouse full Name</label>
                <input type="text" class="form-control" id="SpouseName" name="SpouseName" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Any natural distinguishig marks of Member</label>
                <input type="text" for="disabledInput" readonly="" class="form-control" id="Marks" name="Marks" identity card>
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Birthday of the Member</label>
                <input type="date" class="form-control" id="Birthday" for="disabledInput" readonly="" name="Birthday">
                </div>
                <h4>Identity Card Details</h4>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Identity card Number</label>
                <input type="text" class="form-control" id="IDNumber" name="IDNumber" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Name Appearing on Identity card</label>
                <input type="text" class="form-control" id="IDName" name="IDNname" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Date of Issue NIC</label>
                <input type="date" class="form-control" id="IDDate" for="disabledInput" readonly="" name="IDDate">
                </div>
                <h4>Bank Account Details</h4>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Type Of Account</label>
                <input type="text" class="form-control"" id="ACCType" for="disabledInput" readonly="" name="ACCType"></input>
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Bank Name</label>
                <input type="text" class="form-control" id="BankName" for="disabledInput" readonly="" readonly="" name="BankName"  >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Bank Branch</label>
                <input type="text" class="form-control" id="BankBranch" name="BankBranch" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Account Number</label>
                <input type="Number" class="form-control" id="ACCNumber" for="disabledInput" readonly="" name="ACCNumber" >
                </div>
                <h4>Name Cetification</h4>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Name in Birth Cetificate</label>
                <input type="text" class="form-control" id="NameBC" name="NameBC" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Name in NIC</label>
                <input type="text" class="form-control" id="NameNIC" name="NameNIC" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Name in B-Card</label>
                <input type="text" class="form-control" id="NameBCard" name="NameBCard" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Name in EPF Account in Central Bank</label>
                <input type="text" class="form-control" id="NameEPFCB" name="NameEPFCB" for="disabledInput" readonly="" >
                </div>
                <h4>Membership Numbers</h4>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Last Membership Number</label>
                <input type="text" class="form-control" id="LastMN" name="LastMN"for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Last Employer's Number</label>
                <input type="text" class="form-control" id="LastEN" name="LastEN" for="disabledInput" readonly="">
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Last Job Leveing Date</label>
                <input type="Date" class="form-control" id="LastLD" for="disabledInput" readonly="" name="LastLD" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Cause of cessation of employment</label>
                <input type="text" class="form-control" id="LastLR" name="LastLR" for="disabledInput" readonly="" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Last Employer's Name</label>
                <input type="text" class="form-control" id="LastEName" name="LastEName" for="disabledInput" readonly="" >
                </div>
                <h6>If you work with any employer's membership numbre/employer's number/leving data</h6>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">membership numbre/employer's number/leving data</label>
                <input type="text" class="form-control" id="LastEN1" for="disabledInput" readonly="" name="LastEN1" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">membership numbre/employer's number/leving data</label>
                <input type="text" class="form-control" id="LastEN2" for="disabledInput" readonly="" name="LastEN2" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">membership numbre/employer's number/leving data</label>
                <input type="text" class="form-control" id="LastEN3" for="disabledInput" readonly="" name="LastEN3" >
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">membership numbre/employer's number/leving data</label>
                <input type="text" class="form-control" id="LastEN4" for="disabledInput" readonly="" name="LastEN4">
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">membership numbre/employer's number/leving data</label>
                <input type="text" class="form-control" id="LastEN5" for="disabledInput" readonly="" name="LastEN5" >
                </div>
                <h4>Attachment</h4>
                <div id="links" class="px-5">

                </div>
                <h4>Employer details</h4>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Company Name</label>
                    <input type="text" name="comname" id="comname" for="disabledInput" readonly="" class="form-control" placeholder="Company Name">
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Company Address</label>
                    <input type="text" name="comaddress" id="comaddress" for="disabledInput" readonly="" class="form-control" placeholder="Company Address">
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Owners Name</label>
                    <input type="text" name="comoname" id="comoname" for="disabledInput" readonly="" class="form-control" placeholder="Company Owners Name">
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Employee Name</label>
                    <input type="text" name="name" id="comemname" for="disabledInput" readonly="" class="form-control" placeholder="Employee name">
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Employee Number</label>
                    <input type="text" name="number" id="number" for="disabledInput" readonly="" class="form-control" placeholder="Employee Number">
                </div>
                <div class="form-group px-5">
                <label class="form-label mt-2 ">Employee Last EPF Detail Date</label>
                    <input type="date" for="disabledInput" readonly="" name="date2" id="date2" class="form-control" >
                </div>
                <div class="form-group my-2">
                            <button class="btn btn-success" onclick="ok()">Approved</button>
                            <button class="btn btn-danger" onclick="not()">Reject</button>
                            <button class="btn btn-secondary" onclick="backlist()">Application List</button>
                </div>
            </form>
        </div>

        <div id="list">
        <table class="table table-hover">
            <thead>
                <tr class="table-success outline-primary">
                    <th scope="row">Application ID</th>
                    <td>User ID</td>
                    <td>Action</td>
                </tr>
            </thead>
            <tbody id="pro_list">
                
            </tbody>
        </table>
    </div>  


    <div class="" id="form3">
        <h6>submit Form Mistake</h6>

        <div class="form-group">
        <label for="exampleTextarea" class="form-label mt-4">Add Notice what are the mistakes</label>
        <textarea class="form-control" id="error" rows="3"></textarea>
        </div>

        <div class="form-group my-2">
                <button class="btn btn-danger" onclick="not1()">Reject</button>
                <button class="btn btn-secondary" onclick="backlist()">Application List</button>
        </div>        
    </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        //hide edit part
        $('#edit').hide();
        $('#form2').hide();
        $('#form3').hide();
    
        //send an ajax request at loading products
        $.get("../routes/application/appr04.php", function (res) {
        //display data 
        $("#pro_list").html(res);
        })

        //search emp 
        $("#search_circular").on('input',function(){
            $inputData = $(this).val();

            //send an ajax request 
            $.get("../routes/application/appr04s.php",{searchData:$inputData},function(res){
                $("#pro_list").html(res);
            })
        })
    })

     //this is product edit function
     function view(uid){
         $userid = uid;

        $('#list').hide();
        $('#edit').show();

        $.get("../routes/application/appr01g.php", {
        uid:uid
        }, function (res) {
        var jdata = jQuery.parseJSON(res);
            $("#ID").val(jdata.formID);
            $("#Name").val(jdata.name);
            $("#Address").val(jdata.address);
            $("#FatherName").val(jdata.fatherName);
            $("#MotherName").val(jdata.motherName);
            $("#SpouseName").val(jdata.spouseName);
            $("#Marks").val(jdata.marks);
            $("#Birthday").val(jdata.birthday);
            $("#IDNumber").val(jdata.idNumber);
            $("#IDName").val(jdata.idName);
            $("#IDDate").val(jdata.idDate);
            $("#ACCType").val(jdata.accType);
            $("#BankName").val(jdata.bankName);
            $("#BankBranch").val(jdata.bankBranch);
            $("#ACCNumber").val(jdata.accNumber);
            $("#NameBC").val(jdata.nameBC);
            $("#NameNIC").val(jdata.nameNIC);
            $("#NameBCard").val(jdata.nameBCard);
            $("#NameEPFCB").val(jdata.nameEPFCB);
            $("#LastMN").val(jdata.lastMN);
            $("#LastEN").val(jdata.lastEN);
            $("#LastLD").val(jdata.lastLD);
            $("#LastLR").val(jdata.lastLR);
            $("#LastEName").val(jdata.lastENAme);
            $("#LastEN1").val(jdata.lastEN1);
            $("#LastEN2").val(jdata.lastEN2);
            $("#LastEN3").val(jdata.lastEN3);
            $("#LastEN4").val(jdata.lastEN4);
            $("#LastEN5").val(jdata.lastEN5);
        })
        $.get("../routes/application/appr01gl.php", {
        uid:uid
        }, function (res) {
            $("#links").append(res)
        })
        $.get("../routes/application/appr01e.php", {
        uid:uid
        }, function (res) {
        var jdata = jQuery.parseJSON(res);
            $("#comname").val(jdata.cname);
            $("#comaddress").val(jdata.caddress);
            $("#comoname").val(jdata.coname);
            $("#comemname").val(jdata.name);
            $("#number").val(jdata.number);
            $("#date2").val(jdata.date);
            
        })
     }

     function backlist(){
        $('#list').show();
        $('#edit').hide();
        $('#form2').hide();
        $('#form3').hide();
     }
    
    function not(){
        $('#list').hide();
        $('#edit').hide();
        $('#form3').show();
     }

     function ok(){
        Swal.fire({
            title: 'Are you sure?',
            text: "Did You give ypur appruval to this application!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes,I approve it!'
            }).then((result) => {
            if (result.isConfirmed) {

                $.get("../routes/application/appr04ok.php", {
                    id:$('#ID').val(),
                }, function (res) {
                
                    if(res = "done"){
                        Swal.fire(
                'Appruved!',
                'success'
                )
                    }else{
                        Swal.fire(
                'Not Appruved!',
                'error')
                    }
                        
                    
                })

                $('#list').show();
                $('#edit').hide();
                $('#form2').hide();
                $('#form3').hide();

                $.get("../routes/application/appr04.php", function (res) {
                //display data 
                $("#pro_list").html(res);
                })
                
            }
            })
       
    }

    function not1(){
        Swal.fire({
            title: 'Are you sure?',
            text: "Did You reject this application!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, reject it!'
            }).then((result) => {
            if (result.isConfirmed) {

                $.get("../routes/application/appr04not.php", {
            id:$('#ID').val(),
            error:$('#error').val(),
            
                }, function (res) {
                
                    if(res = "done"){
                        Swal.fire(
                'rejevted!',
                'success'
                )
                    }else{
                        Swal.fire(
                'Not rejected!',
                'error')
                    }
                     
                })

                $('#list').show();
                $('#edit').hide();
                $('#form2').hide();
                $('#form3').hide();

                $.get("../routes/application/appr04.php", function (res) {
                //display data 
                $("#pro_list").html(res);
                })
                
            }
            })
     }


</script>
